/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   init.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: domurdoc <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/09/24 14:33:34 by domurdoc          #+#    #+#             */
/*   Updated: 2019/09/26 20:14:46 by domurdoc         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "fillit.h"

t_tmno	g_tmno[19] = {{1, 4, 0, 0, {0}}, {4, 1, 0, 0, {0}}, {3, 2, 0, 0, {0}},
	{2, 3, 0, 0, {0}}, {3, 2, 0, 0, {0}}, {2, 3, 0, 0, {0}}, {3, 2, 0, 0, {0}},
	{2, 3, 0, 0, {0}}, {3, 2, 0, 0, {0}}, {2, 3, 0, 0, {0}}, {2, 3, 0, 0, {0}},
	{3, 2, 0, 0, {0}}, {2, 3, 0, 0, {0}}, {3, 2, 0, 0, {0}}, {2, 3, 0, 0, {0}},
	{3, 2, 0, 0, {0}}, {2, 3, 0, 0, {0}}, {3, 2, 0, 0, {0}}, {2, 2, 0, 0, {0}}};

void	tmno_msk_init_range(void)
{
	int	i;
	int j;
	int	k;
	int	j_max;

	k = -1;
	while (++k < 19)
	{
		g_tmno[k].range = 0;
		i = g_map - g_tmno[k].h + 1;
		j_max = g_map - g_tmno[k].w + 1;
		while (--i >= 0)
		{
			j = j_max;
			while (--j >= 0)
				g_tmno[k].msk_range[g_tmno[k].range++] = g_tmno[k].msk
				<< (i * g_map + j);
		}
	}
}

void	tmno_msk_init_check(void)
{
	int i;
	int	p;

	if (g_map < 4)
	{
		i = -1;
		p = g_map == 3 ? 2 : 18;
		while (++i < p)
			g_tmno[i].msk = 0;
	}
}

void	tmno_msk_init(void)
{
	g_tmno[0].msk = 15;
	g_tmno[1].msk = ((((((1 << g_map) + 1) << g_map) + 1) << g_map) + 1);
	g_tmno[2].msk = ((((((1 << g_map) + 1) << g_map) + 1) << 1) + 1);
	g_tmno[3].msk = (((((((1 << 1) + 1) << 1) + 1) << (g_map - 2)) + 1) << 2);
	g_tmno[4].msk = ((((((1 << 1) + 1) << g_map) + 1) << g_map) + 1);
	g_tmno[5].msk = ((((((1 << (g_map - 2)) + 1) << 1) + 1) << 1) + 1);
	g_tmno[6].msk = ((((((1 << g_map) + 1) << (g_map - 1)) + 1) << 1) + 1);
	g_tmno[7].msk = ((((((1 << g_map) + 1) << 1) + 1) << 1) + 1);
	g_tmno[8].msk = (((((((1 << 1) + 1) << (g_map - 1)) + 1) << g_map) + 1)
		<< 1);
	g_tmno[9].msk = ((((((1 << 1) + 1) << 1) + 1) << g_map) + 1);
	g_tmno[10].msk = (((((((1 << 1) + 1) << (g_map - 2)) + 1) << 1) + 1) << 1);
	g_tmno[11].msk = ((((((1 << g_map) + 1) << 1) + 1) << g_map) + 1);
	g_tmno[12].msk = ((((((1 << 1) + 1) << g_map) + 1) << 1) + 1);
	g_tmno[13].msk = (((((((1 << (g_map - 1)) + 1) << 1) + 1) << (g_map - 1))
		+ 1) << 1);
	g_tmno[14].msk = ((((((1 << (g_map - 1)) + 1) << 1) + 1) << 1) + 1);
	g_tmno[15].msk = (((((((1 << g_map) + 1) << 1) + 1) << (g_map - 1)) + 1)
		<< 1);
	g_tmno[16].msk = (((((((1 << 1) + 1) << 1) + 1) << (g_map - 1)) + 1) << 1);
	g_tmno[17].msk = ((((((1 << (g_map - 1)) + 1) << 1) + 1) << g_map) + 1);
	g_tmno[18].msk = ((((((1 << 1) + 1) << (g_map - 1)) + 1) << 1) + 1);
	tmno_msk_init_check();
	tmno_msk_init_range();
}
